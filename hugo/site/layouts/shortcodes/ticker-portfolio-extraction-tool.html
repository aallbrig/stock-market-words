{{ if not (.Page.Scratch.Get "ticker-portfolio-extraction-tool-loaded") }}
  {{ .Page.Scratch.Set "ticker-portfolio-extraction-tool-loaded" true }}
  <link href="{{ .Page.Site.BaseURL }}css/ticker-highlight.css" rel="stylesheet">
{{ end }}

<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Ticker Extraction Tool</h5>
        <p class="card-text">Paste any text. We'll find the best stock tickers hidden in your words and show you 5 different portfolios optimized for different strategies!</p>
        
        <!-- Demo Examples -->
        <div class="mb-3">
          <p class="mb-2"><small class="text-muted">Try an example:</small></p>
          <div class="btn-group-vertical btn-group-sm d-grid gap-2" role="group">
            <button type="button" class="btn btn-outline-secondary text-start" onclick="fillExample(0)">
              The cat sat on the mat...
            </button>
            <button type="button" class="btn btn-outline-secondary text-start" onclick="fillExample(1)">
              My dad works at Ford. Yesterday he drove...
            </button>
            <button type="button" class="btn btn-outline-secondary text-start" onclick="fillExample(2)">
              The tech industry saw major changes...
            </button>
          </div>
        </div>
        
        <form id="ticker-form">
          <div class="mb-3">
            <label for="user-input" class="form-label">Your Text:</label>
            <textarea class="form-control" id="user-input" rows="6" placeholder="Enter any text to extract stock tickers..."></textarea>
          </div>
          <button type="submit" class="btn btn-success">Extract Portfolios</button>
        </form>
        
        <!-- Loading Indicator -->
        <div id="loading-indicator" class="mt-3" style="display: none;">
          <div class="progress">
            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%"></div>
          </div>
          <p class="text-center mt-2">
            <small class="text-muted">Analyzing text and finding tickers...</small><br>
            <small class="text-muted"><strong>Computing time: <span id="compute-timer">0</span>s</strong></small>
          </p>
        </div>
      </div>
    </div>
    <div class="card mt-4" id="result-card" style="display:none;">
      <div class="card-body">
        <h5 class="card-title">ðŸŽ¯ 5 Different Portfolios (One Per Strategy)</h5>
        <p class="text-muted">Each strategy finds the highest-scoring tickers in your text. Words are consumed once found!</p>
        <div id="portfolio-strategies" class="mb-4"></div>
      </div>
    </div>
  </div>
</div>

{{ if not (.Page.Scratch.Get "ticker-portfolio-extraction-tool-js-loaded") }}
  {{ .Page.Scratch.Set "ticker-portfolio-extraction-tool-js-loaded" true }}
  <script src="{{ .Page.Site.BaseURL }}js/portfolio-extractor.js"></script>
{{ end }}
